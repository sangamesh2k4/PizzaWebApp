<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Control Center - Menu</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f4f6f9; margin: 0; }
        nav { background: #343a40; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; color: white; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .brand { font-size: 1.2rem; font-weight: bold; color: #ffc107; text-decoration: none; letter-spacing: 0.5px; }
        .nav-links a { color: #ccc; text-decoration: none; margin-left: 20px; font-weight: 500; transition: 0.3s; }
        .nav-links a:hover, .active { color: white; border-bottom: 2px solid #ffc107; padding-bottom: 2px; }
        .logout { background: #dc3545; padding: 6px 15px; border-radius: 4px; color: white !important; border: none; font-weight: bold; }

        .container { max-width: 1200px; margin: 30px auto; padding: 0 20px; }
        h1 { border-left: 5px solid #6f42c1; padding-left: 15px; color: #333; }

        /* Add Form Card */
        .add-card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 30px; }
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; }
        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 4px; width: 100%; box-sizing: border-box; }

        /* üü¢ Styling for the new size-price rows */
        .size-price-container { grid-column: span 2; display: flex; flex-direction: column; gap: 10px; background: #f8f9fa; padding: 15px; border-radius: 5px; border: 1px solid #eee; }
        .size-row { display: flex; gap: 10px; }

        /* üü¢ Styling for Veg Toggle */
        .toggle-container { display: flex; align-items: center; gap: 10px; padding: 10px; }
        .veg-label { font-weight: bold; color: #28a745; cursor: pointer; }

        .btn-add { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        .btn-add:hover { background: #218838; }

        /* Table */
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        th { background: #343a40; color: white; padding: 15px; text-align: left; text-transform: uppercase; font-size: 0.85rem; }
        td { padding: 15px; border-bottom: 1px solid #eee; vertical-align: middle; color: #555; }

        /* Actions */
        .btn-action { text-decoration: none; padding: 5px 10px; border-radius: 4px; font-size: 0.85rem; font-weight: bold; margin-right: 5px; }
        .btn-edit { background: #17a2b8; color: white; }
        .btn-toggle { background: #ffc107; color: #333; }
        .row-disabled { opacity: 0.5; background: #fafafa; }

        .badge-veg { background: #e7f4e4; color: #28a745; padding: 3px 8px; border-radius: 4px; font-weight: bold; font-size: 0.75rem; border: 1px solid #28a745; }
        .badge-nonveg { background: #fdecea; color: #dc3545; padding: 3px 8px; border-radius: 4px; font-weight: bold; font-size: 0.75rem; border: 1px solid #dc3545; }
    </style>
</head>
<body>

<nav>
    <a href="/admin/dashboard" class="brand">‚ö° ADMIN PANEL</a>
    <div class="nav-links">
        <a href="/admin/dashboard">Dashboard</a>
        <a href="/admin/orders" class="active">Orders</a>
        <a href="/admin/menu">Menu</a>
        <a href="/admin/users">Users</a>
        <a href="/admin/ratings">Ratings</a>
        <a href="/admin/coupons">Coupons</a>
        <a href="/admin/messages">Messages</a>
        <a href="/logout" class="logout">Logout</a>
    </div>
</nav>

<div class="container">
    <h1>üçï Menu Catalog</h1>

    <div class="add-card">
        <h3 style="margin-top:0;">Add New Item</h3>
        <form th:action="@{/admin/menu/add}" th:object="${newPizza}" method="post">
            <div class="form-grid">
                <input type="text" th:field="*{name}" placeholder="Item Name (e.g. Margherita)" required>

                <select th:field="*{category}">
                    <option value="Pizza">Pizza</option>
                    <option value="Side">Side</option>
                    <option value="Drink">Drink</option>
                </select>

                <input type="text" th:field="*{imageUrl}" placeholder="Image URL">

                <div class="toggle-container">
                    <input type="checkbox" name="isVeg" id="isVegCheck" value="true" checked style="width: auto;">
                    <label for="isVegCheck" class="veg-label">üå± Vegetarian</label>
                </div>

                <input type="text" th:field="*{description}" placeholder="Description" style="grid-column: span 2;">

                <div class="size-price-container">
                    <label style="font-weight: bold; font-size: 0.9rem;">Set Prices for Sizes:</label>
                    <div class="size-row">
                        <input type="text" name="sizeNames" placeholder="Size (e.g. Small)" required>
                        <input type="number" step="0.01" name="sizeValues" placeholder="Price (‚Çπ)" required>
                    </div>
                    <div class="size-row">
                        <input type="text" name="sizeNames" placeholder="Size (e.g. Medium)">
                        <input type="number" step="0.01" name="sizeValues" placeholder="Price (‚Çπ)">
                    </div>
                    <div class="size-row">
                        <input type="text" name="sizeNames" placeholder="Size (e.g. Large)">
                        <input type="number" step="0.01" name="sizeValues" placeholder="Price (‚Çπ)">
                    </div>
                </div>
            </div>

            <button type="submit" class="btn-add">Add to Menu</button>
        </form>
    </div>

    <table>
        <thead>
        <tr>
            <th>Preview</th>
            <th>Name & Type</th>
            <th>Category</th>
            <th>Base Price</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item : ${pizzas}" th:classappend="${!item.available} ? 'row-disabled'">
            <td><img th:src="${item.imageUrl}" style="width:50px; height:50px; border-radius:4px; object-fit:cover;"></td>
            <td>
                <span th:text="${item.name}" style="font-weight:bold; display: block;">Name</span>
                <span th:if="${item.veg}" class="badge-veg">VEG</span>
                <span th:unless="${item.veg}" class="badge-nonveg">NON-VEG</span>
            </td>
            <td th:text="${item.category}">Cat</td>
            <td th:text="'‚Çπ ' + ${item.price}">Price</td>
            <td>
                <span th:if="${item.available}" style="color:#28a745; font-weight:bold;">Active</span>
                <span th:unless="${item.available}" style="color:#dc3545; font-weight:bold;">Disabled</span>
            </td>
            <td>
                <a th:href="@{/admin/menu/edit/{id}(id=${item.id})}" class="btn-action btn-edit">Edit</a>
                <a th:if="${item.available}" th:href="@{/admin/menu/disable/{id}(id=${item.id})}" class="btn-action btn-toggle" style="background:#dc3545; color:white;">Disable</a>
                <a th:unless="${item.available}" th:href="@{/admin/menu/enable/{id}(id=${item.id})}" class="btn-action btn-toggle" style="background:#28a745; color:white;">Enable</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>